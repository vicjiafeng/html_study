# TCP/IP协议
___

### 1. 网络协议栈

               应用层                                        
         
               表示层                         应用层           FTP(21)/HTTP(80)/DNS(53)/TELNET(23)/SMTP(25)/TFTP(69)协议
         
               会话层                                         应用程序通过这层访问网络
         
               传输层                         传输层           TCP/UDP协议
         
               网络层                         网络层           IP/ARP/RARP/ICMP协议
         
               链路层                         接口层           TCP/IP协议基层，负责数据桢的发送和接收
         
               物理层

* 应用层：提供的接口是最终用户所有网络活动的基础

* 表示层：将接收到的数据转换成应用层可以读取的格式，同时用来保护数据的加密与解密操作

* 会话层：管理两台计算机间的对话，以全双工或半双工形式建立会话连接，关闭连接

* 传输层：为较低层提供可靠的数据传输服务，提供面向连接(tcp)和无连接(udp)网络协议，某些防火墙和代理服务器也在这一层

* 网络层：负责数据在物理网络中的路由转发，路由器-负责两个或多个网络间转发数据包

* 链路层：提供寻址方案，网桥和交换机工作在此层

* 物理层：定义所有使用的网络硬件设备(集线器)的物理和电气特性，可以讲数字信号转换成模拟信号传输

`网络传输流程：初始数据首先在传输网络的应用层开始，沿着模型逐层向下，直到物理层，然后传输系统将数据发送到接收系统，接收系统从物理层获取传输数据，然后逐层向上处理，直到最高的应用层`
               
### 2. 数据包嗅探  

   `收集 > 转换 > 分析`

* 交换机中的网络嗅探

1. 端口镜像：通过命令行或web管理界面访问目标设备所连接的交换机，且交换机支持端口镜像功能，存在空闲端口

2. 集线器输出：将目标设备和分析系统分段到同一网络段中，然后把它们直接插入到一个集线器上，当交换机不支持端口镜像的选择

3. 使用网络分流器：置于网络布线系统的两个端口之间，以捕获数据包，分为聚合(3个端口)和非聚合(4个端口)

4. ARP欺骗攻击：通过发送包含虚假MAC地址的ARP消息，以劫持其他计算机流量的过程

* 路由网络中的嗅探与交换机中类似

               
### 3. IP地址
    
 * 组成-网络号/主机号
 
         IPv4 32位
         
         IPv6 128位
     
 * 分类
 
         A类-8位网络号，24位主机号（2^24-2个主机号）
             
           网络号范围：      1.0.0.0 --- 127.0.0.0
           
           IP地址范围：      1.0.0.0 --- 127.255.255.255
           
           IP私有地址范围：   10.0.0.0 --- 10.255.255.255
           
         B类-16位网络号，16位主机号（2^16-2个主机号）
         
           网络号范围：       128.0.0.0 --- 191.255.0.0
           
           IP地址范围：       128.0.0.0 --- 191.255.255.255
           
           IP私有地址范围：    172.16.0.0 --- 172.31.255.255
           
         C类地址-24位网络号，8位主机号（2^8-2个主机号）
         
           网络号范围：       192.0.0.0 --- 223.255.255.0
           
           IP地址范围:       192.0.0.0 --- 223.255.255.255
           
           ip私有地址范围：   192.168.0.0 --- 192.168.255.255
           
### 4. TCP/UDP

  * UDP-传输层协议
    
          发送数据无需连接
          
          缺少可靠性
          
          面向报文，没有拥塞控制
          
          速率快，支持一对一，一对多，多对多交互通信
  
  * TCP-传输层协议
  
          提供可靠数据传输服务，面向连接
          
          点对点连接
          
          提供全双工通信
          
          面向字节流
          
### 5. TCP传输

  * 三次握手
     
     ![](https://github.com/vicjiafeng/html_study/blob/master/image/tcp-3.png)
  
  * 四次挥手
  
     ![](https://github.com/vicjiafeng/html_study/blob/master/image/tcp-4.png)
